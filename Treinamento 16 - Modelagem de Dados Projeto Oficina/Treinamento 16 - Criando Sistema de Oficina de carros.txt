CREATE DATABASE OFICINA;
USE OFICINA;

CREATE TABLE CLIENTE(
	IDCLIENTE INT PRIMARY KEY AUTO_INCREMENT,
	NOME VARCHAR(100) NOT NULL,
	CPF VARCHAR(20) UNIQUE,
	SEXO ENUM('F','M'),
	ID_CARRO INT UNIQUE


);

CREATE TABLE TELEFONE(
	IDTELEFONE INT PRIMARY KEY AUTO_INCREMENT,
	TIPO ENUM('CELULAR','COMERCIAL','RESIDENCIAL') NOT NULL,
	NUMERO VARCHAR(20) NOT NULL,
	ID_CLIENTE INT


);

/*PARA NÃO TER ERRO NA MARCA SÓ PODE TER UMA MARCA POR CADASTRO*/
CREATE TABLE MARCA(
 IDMARCAR INT PRIMARY KEY AUTO_INCREMENT,
 MARCA VARCHAR(30) UNIQUE


);




CREATE TABLE CARRO(
	IDCARRO INT PRIMARY KEY AUTO_INCREMENT,
	MODELO VARCHAR(50) NOT NULL,
	PLACA VARCHAR(50) NOT NULL UNIQUE,
	CHASSI VARCHAR(18) UNIQUE,
	ID_MARCA INT


);


CREATE TABLE COR(
	IDCOR INT PRIMARY KEY AUTO_INCREMENT,
	COR VARCHAR(50) UNIQUE


);

/* TABELA ASSOCIATIVA*/

CREATE TABLE CARRO_COR(
	ID_CARRO INT,
	ID_COR INT,
	PRIMARY KEY (ID_CARRO,ID_COR)


);

/* CONSTRAINTS*/

ALTER TABLE CLIENTE
ADD CONSTRAINT FK_TELEFONE_PK_CLIENTE
FOREIGN KEY(ID_CARRO)
REFERENCES CLIENTE (IDCLIENTE);

ALTER TABLE CARRO
ADD CONSTRAINT FK_CARRO_PK_CLIENTE
FOREIGN KEY(ID_CARRO)
REFERENCES CLIENTE (IDCLIENTE);